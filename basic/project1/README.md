# 仿ECShop 项目

  # 项目结构
    -- application    应用程序目录
        -- controllers  控制器目录
            -- admin      后台控制器目录
            -- home       前台控制器目录
        -- models       模型目录
            
        -- views        视图目录
            -- admin      后台视图目录
            -- home       前台视图目录
        -- config       配置文件目录
      
        
    -- framework      框架目录
        -- core         核心类目录
        -- database     数据库驱动目录
        -- helpers      辅助函数目录
        -- libraries    库目录 工具类
    -- public         前台静态文件
        -- uploads      上传文件目录

    -- index.php      单一入口
  # 编码规范
    1 一定要有注释
    2 统一的命名规范 
      文件名  主要指类文件，不是类不加class
      类名  使用大驼峰GoodsController 
      方法名 使用小驼峰 listAction 首字母小写
      属性名 使用小驼峰 ，private属性前面加一个下划线'_'（推荐）
      函数名  遵循PHP本身的写法  下划线 或者全小写
    3 严格区分大小写
      Lamp  linux 系统严格区分大小写
    4 注意缩进，代码对齐


  # 定义核心类 

     - 启动类：
        前后台控制器 视图怎么定义？
          需要解析url 携带的参数 p=admin&c=goods&a=list
          此时我们需要使用$_REQUEST
        初始化工作 路径等
          define();
        路由功能
          new controller()
        自动加载  
          __autoload 魔术函数 不是类的方法 
          自定义自动加载方法
     - 定义核心类
        基础控制器：定义所有控制器都需要用的方法     
          1 提示信息跳转
          2 载入 其他模型（工具类和辅助函数）

          meta 可以控制时间，
            message 页面
     - 载入数据库模型
        Model
        Mysql 需要配置文件         结合我们的config 

     - 载入辅助类  
       在基础类控制器中 加载辅助类 函数类

  # 数据库设计
    - 表与表的联系
    - 每一个字段的类型
    数据库设计的好坏 决定了整个项目的成败
    数据库的设计 体现了你对业务逻辑的理解

    从商品出发
      图片保存分两部分：1是将图片本身保存到磁盘的某个位置， 2是将磁盘地址存入数据库

    表与表的联系分为三种：
      一对一
      一对多
      多对多
    品牌表与商品表的联系
      一个品牌对应多个商品
      一个商品对应一个品牌  
      结论： 一对多的关系，则在多的一方 增加一个字段和一的一方的主键关联
      PK： primary key 主键
      FK： foreign key 外键
      此时，品牌表与商品表之间存在父子关系，品牌是父，商品是子
    商品规格参数如何保存？（难点）
      任何一个商品的信息都是由两部分组成的 
        基础信息：所有商品都具备的信息
        扩展信息：不同类型的商品，他的属性是不一样的  。规格参数
      对基础信息，直接保存到商品类中
      对扩展信息，怎么保存？
        最傻的方式 用一个大字段一次性保存，比如 用text 。但是这样不好，不利于搜索，也不利于管理（页面也不利于展示）
        我们希望的方式，每个商品的每一个规格都用一条记录来保存
        意味着 商品与扩展信息 有一种联系
          一个商品 对应 多条扩展信息
          一条扩展信息 对应  多个商品
          结论： 商品与扩展信息 是一个多对多的关系
          如何保存着类型信息呢？
            多多的关系，需要引入第三张表（关联表），来表示二者的关系

            关联表的主键有两种方式:
              组合主键，使用两个字段构成主键
              再加一个字段，设置为主键

      又面临一个问题？
        有这么多扩展属性，如何来管理
        假如现在有20个商品（书籍、服装、手机等），每种商品有20个扩展属性，那就意味着有400条记录需要管理。

        在这种情况下，我现在需要添加一个 书籍 商品---php编程艺术 ，填写20个扩展属性  。
        需要对扩展属性进行分门类别的管理
        再增加一张表，商品类型表，用来表示商品扩展属性的类别
    -------------
    商品分类添加
      无限级分类：
        从两个方面来说：
          数据表的设计： parent_id 关联   
          程序的实现 : 递归 tree结构
    商品分类编辑：
      先列出商品分类信息，便于修改
      提交表单，完成更新操作